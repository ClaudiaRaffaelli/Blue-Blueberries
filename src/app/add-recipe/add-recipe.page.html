<ion-header no-border>
  <ion-toolbar class="ios hydrated">
    <ion-title class="ios title-ios hydrated">Add Recipe</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-list lines="full">
    <form [formGroup]="recipeForm" (ngSubmit)="formSubmit()">
      <ion-item>
        <ion-label position="floating">Name</ion-label>
        <ion-input formControlName="name" type="text" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Recipe</ion-label>
        <ion-input formControlName="recipeText" type="text" required>
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Time (min.)</ion-label>
        <ion-input formControlName="recipeTime" type="number" required>
        </ion-input>
      </ion-item>

      <!-- Images selector -->
      <ion-card class="ion-text-center">
        <ion-card-header>
          <ion-card-title>Choose Images to Upload</ion-card-title>
        </ion-card-header>
        <ion-card-content class="insertImage" (change)="uploadFile($event.target.files)">
          <ion-button color="primary" shape="square" expand="block" >
            <input id="uploadBtn" type="file" class="upload" />
          </ion-button>
          Images Uploaded:<br>
          <ion-item *ngFor="let imageName of imagesUploaded" class="user-list">
            <div>
              {{imageName.split('.')[0].substring(0,6)}}... .jpg
              <ion-icon name="cloud-done-outline"></ion-icon>
            </div>
          </ion-item>
        </ion-card-content>
      </ion-card>


      <!-- Default Searchbar -->
      <ion-card>
        <ion-grid>
          <ion-label>Ingredients selected:</ion-label>
          <ion-row class="forecast_container">
            <ion-col *ngFor="let ingredient of recipeForm.value.ingredientsForm.ingredients | keyvalue">
              <ion-item *ngIf="ingredient.value">
                <ion-icon (click)="toggleIngredient(ingredient.key)" name="trash-sharp"></ion-icon>
                <ion-label color="primary">{{ingredient.key}}</ion-label>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>
        <ion-searchbar (ionChange)="_ionChange($event)" animated placeholder="Search ingredients...">
        </ion-searchbar>
        <ion-list *ngIf="showSearchBarResults">
          <ion-item *ngFor="let ingredient of this.ingredients | keyvalue">
            <ion-label color="dark" (click)="toggleIngredient(ingredient.value)">{{ingredient.value}}</ion-label>
            {{this.recipeForm.value.ingredientsForm.ingredients[ingredient]}}
            <ion-icon (click)="toggleIngredient(ingredient.value)"
                      [name]="this.recipeForm.value.ingredientsForm.ingredients[ingredient.value] ? 'checkmark-sharp' : 'add-outline'" item-end ></ion-icon>
          </ion-item>
        </ion-list>
      </ion-card>

      <ion-row>
        <ion-col>
          <ion-button type="submit" color="success" shape="full" expand="block">Add Recipe</ion-button>
        </ion-col>
      </ion-row>
    </form>



  </ion-list>



</ion-content>
